{"version":3,"file":"main.min.4f2b4722.js","sources":["main.js"],"sourcesContent":["class DatingApp {\n\tconstructor() {\n\t\tthis.modal = null;\n\t\tthis.form = null;\n\t\tthis.isAuthenticated = false;\n\t\tthis.authToken = localStorage.getItem('dating_auth_token');\n\n\t\tthis.init();\n\t}\n\n\tinit() {\n\t\t// Check if user is already authenticated\n\t\tif (this.authToken) {\n\t\t\tthis.checkAuthStatus();\n\t\t}\n\n\t\tthis.bindEvents();\n\t\tthis.setupModal();\n\t}\n\n\tbindEvents() {\n\t\t// Sign up button clicks\n\t\tdocument.getElementById('signupBtn')?.addEventListener('click', () => this.openModal());\n\n\t\t// Form submission\n\t\tdocument.getElementById('signupForm')?.addEventListener('submit', (e) => this.handleFormSubmit(e));\n\n\t\t// Modal close events\n\t\tdocument.getElementById('modalClose')?.addEventListener('click', () => this.closeModal());\n\t\tdocument.addEventListener('keydown', (e) => {\n\t\t\tif (e.key === 'Escape' && this.modal?.classList.contains('active')) {\n\t\t\t\tthis.closeModal();\n\t\t\t}\n\t\t});\n\n\t\t// Form input validation\n\t\tdocument.getElementById('email')?.addEventListener('blur', (e) => this.validateEmail(e.target.value));\n\t\tdocument.getElementById('password')?.addEventListener('blur', (e) => this.validatePassword(e.target.value));\n\t\tdocument.getElementById('email')?.addEventListener('input', (e) => this.clearError('emailError'));\n\t\tdocument.getElementById('password')?.addEventListener('input', (e) => this.clearError('passwordError'));\n\t}\n\n\tsetupModal() {\n\t\tthis.modal = document.getElementById('signupModal');\n\t\tthis.form = document.getElementById('signupForm');\n\t}\n\n\topenModal() {\n\t\tif (this.modal) {\n\t\t\tthis.modal.classList.add('active');\n\t\t\tdocument.body.style.overflow = 'hidden';\n\t\t\tdocument.getElementById('email')?.focus();\n\t\t}\n\t}\n\n\tcloseModal() {\n\t\tif (this.modal) {\n\t\t\tthis.modal.classList.remove('active');\n\t\t\tdocument.body.style.overflow = '';\n\t\t\tthis.resetForm();\n\t\t}\n\t}\n\n\tresetForm() {\n\t\tif (this.form) {\n\t\t\tthis.form.reset();\n\t\t\tthis.clearAllErrors();\n\t\t\tthis.hideSuccessMessage();\n\t\t}\n\t}\n\n\tvalidateEmail(email) {\n\t\tconst emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n\t\tconst inputElement = document.getElementById('email');\n\n\t\tif (!email) {\n\t\t\tthis.showError('emailError', 'Email is required');\n\t\t\tinputElement.classList.add('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!emailRegex.test(email)) {\n\t\t\tthis.showError('emailError', 'Please enter a valid email address');\n\t\t\tinputElement.classList.add('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.clearError('emailError');\n\t\tinputElement.classList.remove('error');\n\t\treturn true;\n\t}\n\n\tvalidatePassword(password) {\n\t\tconst inputElement = document.getElementById('password');\n\n\t\tif (!password) {\n\t\t\tthis.showError('passwordError', 'Password is required');\n\t\t\tinputElement.classList.add('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tif (password.length < 8) {\n\t\t\tthis.showError('passwordError', 'Password must be at least 8 characters long');\n\t\t\tinputElement.classList.add('error');\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.clearError('passwordError');\n\t\tinputElement.classList.remove('error');\n\t\treturn true;\n\t}\n\n\tshowError(elementId, message) {\n\t\tconst errorElement = document.getElementById(elementId);\n\t\tif (errorElement) {\n\t\t\terrorElement.textContent = message;\n\t\t}\n\t}\n\n\tclearError(elementId) {\n\t\tconst errorElement = document.getElementById(elementId);\n\t\tif (errorElement) {\n\t\t\terrorElement.textContent = '';\n\t\t}\n\t}\n\n\tclearAllErrors() {\n\t\tthis.clearError('emailError');\n\t\tthis.clearError('passwordError');\n\t\tdocument.getElementById('email')?.classList.remove('error');\n\t\tdocument.getElementById('password')?.classList.remove('error');\n\t}\n\n\tshowSuccessMessage() {\n\t\tconst successMessage = document.getElementById('successMessage');\n\t\tconst form = document.getElementById('signupForm');\n\n\t\tif (successMessage && form) {\n\t\t\tform.style.display = 'none';\n\t\t\tsuccessMessage.style.display = 'flex';\n\t\t}\n\t}\n\n\thideSuccessMessage() {\n\t\tconst successMessage = document.getElementById('successMessage');\n\t\tconst form = document.getElementById('signupForm');\n\n\t\tif (successMessage && form) {\n\t\t\tsuccessMessage.style.display = 'none';\n\t\t\tform.style.display = 'flex';\n\t\t}\n\t}\n\n\tasync handleFormSubmit(e) {\n\t\te.preventDefault();\n\n\t\tconst email = document.getElementById('email').value;\n\t\tconst password = document.getElementById('password').value;\n\n\t\tconst isEmailValid = this.validateEmail(email);\n\t\tconst isPasswordValid = this.validatePassword(password);\n\n\t\tif (!isEmailValid || !isPasswordValid) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tawait this.authenticateUser(email, password);\n\t\t} catch (error) {\n\t\t\ttry {\n\t\t\t\tawait this.registerUser(email, password);\n\t\t\t} catch (registerError) {\n\t\t\t\tconsole.error('Registration failed:', registerError);\n\t\t\t\tthis.showError('emailError', 'Registration failed. Please try again.');\n\t\t\t}\n\t\t}\n\t}\n\n\tasync authenticateUser(email, password) {\n\t\tconst credentials = btoa(`${email}:${password}`);\n\t\tconst response = await fetch('https://api.dating.com/identity', {\n\t\t\tmethod: 'GET',\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Basic ${credentials}`,\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t});\n\n\t\tif (response.ok) {\n\t\t\tconst token = response.headers.get('X-Token');\n\t\t\tif (token) {\n\t\t\t\tthis.authToken = token;\n\t\t\t\tlocalStorage.setItem('dating_auth_token', token);\n\t\t\t\tthis.isAuthenticated = true;\n\t\t\t\tthis.redirectToAuthZone(token);\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Authentication failed');\n\t\t}\n\t}\n\n\tasync registerUser(email, password) {\n\t\tconst response = await fetch('https://api.dating.com/identity', {\n\t\t\tmethod: 'PUT',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\temail: email,\n\t\t\t\tpassword: password\n\t\t\t})\n\t\t});\n\n\t\tif (response.ok) {\n\t\t\tconst token = response.headers.get('X-Token');\n\t\t\tif (token) {\n\t\t\t\tthis.authToken = token;\n\t\t\t\tlocalStorage.setItem('dating_auth_token', token);\n\t\t\t\tthis.isAuthenticated = true;\n\t\t\t\tthis.showSuccessMessage();\n\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.redirectToAuthZone(token);\n\t\t\t\t}, 2000);\n\t\t\t}\n\t\t} else {\n\t\t\tconst errorData = await response.json().catch(() => ({}));\n\t\t\tthrow new Error(errorData.message || 'Registration failed');\n\t\t}\n\t}\n\n\tasync checkAuthStatus() {\n\t\tif (!this.authToken) return;\n\n\t\ttry {\n\t\t\tconst response = await fetch('https://api.dating.com/identity', {\n\t\t\t\tmethod: 'GET',\n\t\t\t\theaders: {\n\t\t\t\t\t'Authorization': `Bearer ${this.authToken}`,\n\t\t\t\t\t'Content-Type': 'application/json'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (response.ok) {\n\t\t\t\tthis.isAuthenticated = true;\n\t\t\t\tthis.redirectToAuthZone(this.authToken);\n\t\t\t} else {\n\t\t\t\tlocalStorage.removeItem('dating_auth_token');\n\t\t\t\tthis.authToken = null;\n\t\t\t\tthis.isAuthenticated = false;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Auth check failed:', error);\n\t\t\tlocalStorage.removeItem('dating_auth_token');\n\t\t\tthis.authToken = null;\n\t\t\tthis.isAuthenticated = false;\n\t\t}\n\t}\n\n\tredirectToAuthZone(token) {\n\t\tconst redirectUrl = `https://www.dating.com/people/#token=${token}`;\n\t\twindow.location.href = redirectUrl;\n\t}\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\tnew DatingApp();\n});\n"],"names":["DatingApp","constructor","this","modal","form","isAuthenticated","authToken","localStorage","getItem","init","checkAuthStatus","bindEvents","setupModal","document","getElementById","addEventListener","openModal","handleFormSubmit","e","closeModal","key","classList","contains","validateEmail","target","value","validatePassword","clearError","add","body","style","overflow","focus","remove","resetForm","reset","clearAllErrors","hideSuccessMessage","email","inputElement","test","showError","password","length","elementId","message","errorElement","textContent","showSuccessMessage","successMessage","display","preventDefault","isEmailValid","isPasswordValid","await","authenticateUser","error","registerUser","registerError","console","credentials","btoa","response","fetch","method","headers","Authorization","Content-Type","ok","Error","token","get","setItem","redirectToAuthZone","JSON","stringify","errorData","json","catch","setTimeout","removeItem","window","location","href"],"mappings":"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"}